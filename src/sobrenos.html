<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="../assets/images/icon plata.png" type="image/x-icon"> 
  <link rel="stylesheet" type="text/css" href="../estilos/sobrenos.css" />
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

  <title>Formulário de Denúncia</title>
 
</head>
<body>
  <header class="cabecalho">
    <a href="../index.html"><img src="../assets/images/logoecoguard.svg" alt="simbolo de reciclagem"></a>
      <div>   
        <a href="../index.html"><h1>ECO</h1></a>
        <a href="../index.html"><h1 class="planet">GUARD</h1></a>
      </div>
  </header>
  <main>
    <h1>Sobre nós</h1>
    <div class="sobrenos">
        <p>A plataforma conta com diversos recursos necessários para denunciar atividades prejudiciais ao meio ambiente e promover mudança positiva. Estamos comprometidos com transparência e a responsabilidade, e a creditamos que a colaboração é a chave para criar um mundo mais sustentável.</p>
    </div>
    <div id="instagram-feed" class="instagram-carousel"></div>
    
  </main>
  <script>
    function fetchData(url, callback) {
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
          var data = JSON.parse(xhr.responseText);
          callback(data);
        }
      };
      xhr.open("GET", url, true);
      xhr.send();
    }

    fetchData('https://servidor-banco-de-dados-production.up.railway.app/getInstagramFeed', function (instagramData) {
        console.log(instagramData);

        const instagramFeedElement = $('#instagram-feed');

        // Limpe o conteúdo existente (se houver)
        instagramFeedElement.html('');

        // Verifique se há dados de publicações
        if (instagramData.data && instagramData.data.length > 0) {
            // Itere sobre as publicações e exiba na página
            instagramData.data.forEach(post => {
                const postElement = document.createElement('div');
                postElement.classList.add('instagram-post');

                if (post.media_type === 'IMAGE' || post.media_type === 'CAROUSEL_ALBUM') {
                    // Crie elementos de imagem para imagens e álbuns
                    createImageElements(post, postElement);
                }

                // Adicione o caption abaixo da imagem
                const captionElement = document.createElement('p');
                captionElement.innerText = post.caption;
                postElement.appendChild(captionElement);

                instagramFeedElement.append(postElement);
            });

            // Inicialize o Slick Carousel após adicionar as imagens
            instagramFeedElement.slick({
                slidesToShow: 3,
                slidesToScroll: 1,
                autoplay: true,
                autoplaySpeed: 2000,
                arrows: true,
                dots: true
            });

            // Adicione um evento de clique nas imagens para abrir a publicação
            instagramFeedElement.on('click', '.instagram-image', function() {
                const postIndex = $(this).parent().index();
                const postLink = instagramData.data[postIndex].permalink;
                window.open(postLink, '_blank');
            });
        } else {
            // Caso não haja publicações
            instagramFeedElement.html('<p>Nenhuma publicação encontrada.</p>');
        }
    });

    function createImageElements(post, postElement) {
        // Verifique se há imagens no álbum
        if (post.media_type === 'CAROUSEL_ALBUM' && post.children && post.children.data && post.children.data.length > 0) {
            post.children.data.forEach(albumImage => {
                const imageElement = document.createElement('img');
                imageElement.src = albumImage.media_url;
                imageElement.alt = 'Instagram Album Image';
                imageElement.classList.add('instagram-image');
                postElement.appendChild(imageElement);
            });
        } else {
            // Crie um elemento de imagem para imagens individuais
            const imageElement = document.createElement('img');
            imageElement.src = post.media_url;
            imageElement.alt = 'Instagram Image';
            imageElement.classList.add('instagram-image');
            postElement.appendChild(imageElement);
        }
    }

    
    
  </script>
  <footer>
    <div class="divRodape">
        <a href="../index.html"><img src="../assets/images/image 78.svg" alt="simbolo de reciclagem"></a>        
        <div>   
            <a href="../index.html"><h1>ECO</h1></a>
            <a href="../index.html"><h1 class="planet">GUARD</h1></a>
        </div>
      </div>
      <div>
        <a href="https://www.instagram.com/ecoguardslz/" target="_blank">
          <img
            src="../assets/images/instagramicon.svg"
            alt="foto instagram"
            class="imgRodape"
          />
        </a>
        <a href="https://x.com/ecoguardslz?s=21" target="_blank">
          <img
            src="../assets/images/twittericon.svg"
            alt="foto twiter"
            class="imgRodape"
          />
        </a>
      </div>
    </footer>
  </body>
</html>


 